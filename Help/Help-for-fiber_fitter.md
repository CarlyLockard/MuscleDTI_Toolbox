# Help for the function <i>fiber_fitter</i>, v. 0.1.x

## Introduction

This help file contains information about
1) [Purpose of the Program](https://github.com/bdamon/MuscleDTI_Toolbox/blob/master/Help/Help-for-fiber_fitter.md#1-Purpose)
2) [Usage of the Program](https://github.com/bdamon/MuscleDTI_Toolbox/blob/master/Help/Help-for-fiber_fitter.md#2-Usage)
3) [Syntax](https://github.com/bdamon/MuscleDTI_Toolbox/blob/master/Help/Help-for-fiber_fitter.md#3-Syntax)
4) [Example Code](https://github.com/bdamon/MuscleDTI_Toolbox/blob/master/Help/Help-for-fiber_fitter.md#4-Example-Code)
5) [Acknowledgements](https://github.com/bdamon/MuscleDTI_Toolbox/blob/master/Help/Help-for-fiber_fitter.md#5-Acknowledgements)

## 1. Purpose
The function <i>fiber_fitter</i> is used to smooth and increase the spatial resolution along fiber tracts by performing a polynomial fit. 

## 2. Usage

The user inputs the fiber tracts generated by <i>fiber_track</i> and a structure with options for implementing the polynomial fitting routines.  The [row column slice] positions are separately fitted to n<sup>th</sup>-order polynomials as functions of voxel-distance along the tract. The polynomials are solved to smooth the tract; the original resolution can be preserved, or the fitted tracts can be interpolated at a higher resolution. The user selects the polynomial order and interpolation resolution.  

This procedure is modified previous work to: 1) fit the tract positions as functions of distance rather than point number and 2) allow selection of the polynomial order.  The former option is required for tracking algorithms that use variable step sizes.

## 3. Syntax
[fitted_fiber_all, pcoeff_r, pcoeff_c, pcoeff_s, n_points_fitter] = fiber_fitter (fiber_all, fs_options);

### Input Arguments

* <i>fiber_all</i>: The original fiber tracts, output from fiber_track

* <i>ff_options</i>: A structure containing the following fields:

   <i>interpolation_step</i>: An interpolation interval for the fitted fiber tract, in units of pixels.  For example, setting interpolation_step to 0.25 would interpolate the fiber tract at intervals of 0.25 pixels.

   <i>p_order</i></i>: A three-element vector containing the polynomial orders n to use when fitting the tracts; they should be specified in the sequence row-column-slice.

### Output Arguments

* <i>fitted_fiber_all</i>: A 4D matrix containing the smoothed fiber tracts

* <i>pcoeff_r, pcoeff_c, pcoeff_s</i>: Matrices of the polynomial coefficients for the tracts' row, column, and slice positions as functions of voxel distance, with dimensions of N<sub>R,A</sub> x N<sub>C,A</sub> x (n+1) 

## 4. Example Code
 

## 5. Acknowledgements
People: Zhaohua Ding, Anneriet Heemskerk

Grant support: NIH/NIAMS R01 AR050101, NIH/NIAMS R01 AR073831
